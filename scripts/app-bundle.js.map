{"version":3,"sources":["router/strategizer.ts","router/utils.ts","router/indexer.ts","router/routes.ts","router/indexed.ts","app.ts","environment.ts","main.ts","pages/index.ts","resources/index.ts","pages/account/index.ts","/Users/kristianmandrup/repos/aurelia-projs/aurelia-app/src/app.html","/Users/kristianmandrup/repos/aurelia-projs/aurelia-app/src/pages/index.html","/Users/kristianmandrup/repos/aurelia-projs/aurelia-app/src/pages/account/index.html"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["export function indexStrat(instruction) {\n    // let config = transformRoute(instruction);\n    let path = 'pages' + instruction.fragment ;\n\n    console.log('all the same', instruction); \n\n    instruction.config.moduleId = path;\n    instruction.config.href = path;    \n  }\n\nexport function createStrategy(transformRoute) {\n  return function navStrat(instruction) {\n    let config = transformRoute(instruction);\n    console.log('transformed config', config);\n\n    instruction.config.moduleId = config.moduleId;\n    instruction.config.href = config.href;\n\n    console.log('final instruction config', instruction.config);    \n  }\n}\n\nexport function routeStrategizer(useStrategy, transformRoute) {\n  return function(route) {\n    if (useStrategy(route)) {\n      const strategy = createStrategy(transformRoute);\n      console.log('nav strategy must not return!!', strategy);\n      \n      route.navigationStrategy = strategy; \n    }    \n    return route;\n  }\n}\n","export function joinPaths(...paths) {  \n  let _paths = paths.join('/');\n  return _paths.replace(/\\/\\//, '/')\n}\n","import {joinPaths} from './utils';\n\nexport function navToIndexOnFragment(instruction) {\n  let originalPath = instruction.fragment;\n  let path = originalPath;\n  console.log('incoming', instruction);\n  path = joinPaths('pages', originalPath, 'index');\n\n  console.log('final path', path);\n  return { moduleId: path, href: originalPath };\n}\n\n\nexport function navToIndexOnConfig(instruction) {\n  let config = instruction.config;\n  let routeModuleId = config.moduleId;\n  console.log('incoming', config.name, routeModuleId);\n  let routeModulePath = joinPaths(routeModuleId, 'index');\n\n  console.log('final path', routeModulePath);\n  return { moduleId: routeModulePath, href: instruction.fragment };\n}\n","import { navToIndexOnConfig } from './indexer';\nimport { indexStrat, createStrategy } from './strategizer';\n\nconst strategy = createStrategy(navToIndexOnConfig);\n\nexport const shortest = [\n  { route: '', moduleId: '.', title: 'Home', name: 'home', nav: true },\n  { route: 'account',  moduleId: 'account', title: 'Account', name: 'account', nav: true }\n]\n\nexport const short = [\n  { route: '', moduleId: 'pages', title: 'Home', name: 'home', nav: true },\n  { route: 'account',  moduleId: 'pages/account', title: 'Account', name: 'account', nav: true }\n]\n\nexport const full = [\n  { route: '', moduleId: 'pages/index', title: 'Home', name: 'home', nav: true },\n  { route: 'account',  moduleId: 'pages/account', title: 'Account', name: 'account', nav: true, navigationStrategy: strategy }\n]\n","import {joinPaths} from './utils';\n\nexport function decorateSettings(setting) {\n  return function(route) {\n    console.log('decorating settings', route, setting);\n    let settings = Object.assign({}, route['settings'], setting);\n    console.log('new settings', settings);      \n    route.settings = settings;\n    console.log('route', route);     \n    return route;\n  }\n}\n\nexport function indexModuleId(route) {\n  return joinPaths(route.moduleId, 'index');\n}\n\nexport function nestedModuleId(route, {root, page}) {\n  let pageName = route.name;\n  if (page) {\n    pageName = typeof page === 'string' ? page : page(pageName); \n  }\n  const basePath = root ? joinPaths(root, route.moduleId) : route.moduleId;  \n  return joinPaths(basePath, pageName);\n}\n\nexport function isIndexed(route) {\n  return route.settings && route.settings.indexed;\n}\n\nexport function decorateModuleId(route) {\n  console.log('decorating moduleId', route);\n  route.moduleId = indexModuleId(route); \n  return route;\n}\n\nexport function createDecorator(transform, options = {}) {\n  return function (route) {\n    route.moduleId = transform ? transform(route, options) : joinPaths(route.moduleId, 'index'); \n    return route;\n  }\n}\n\n\n","import {Router, RouterConfiguration} from 'aurelia-router';\nimport {inject} from 'aurelia-framework';\nimport { routeStrategizer } from './router/strategizer';\nimport { shortest, short, full } from './router/routes';\nimport { isIndexed, decorateSettings, decorateModuleId, createDecorator, nestedModuleId } from './router/indexed';\nimport { navToIndexOnConfig } from './router/indexer';\n\n\nexport class App {\n  router: Router;\n\n  configureRouter(config: RouterConfiguration, router: Router){\n    // decorate routes with {indexed: true}\n    // const routes = short.map(decorateSettings({indexed: true}));    \n    // const routes = short.map(decorateModuleId);\n    // const routes = shortest.map(createDecorator(nestedModuleId, {root: 'pages', page: (name) => { return name + 'Page' } }));\n    const routes = shortest.map(createDecorator(nestedModuleId, {root: 'pages', page: 'index'}));\n    \n    // same as: decorateSettings({indexed: true})\n    // const myRoutes = short.map(route => {\n    //   route['settings'] = {indexed: true};\n    //   return route; \n    // });\n\n    // const myRoutes = full;\n\n    config.title = 'Contacts';\n\n    // decorate with routing strategy\n    // const decorator = routeStrategizer(isIndexed, navToIndexOnConfig);    \n    // let appRoutes = routes.map(decorator); \n\n    const appRoutes = routes;\n\n    console.log('App routes'); \n    appRoutes.forEach(route => {\n      console.log('route', route);      \n    })\n\n    console.log('Mapping routes!!!');\n    config.map(appRoutes);\n\n    config.mapUnknownRoutes('not-found');\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export class Home {\n  \n}","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","export class Home {\n  \n}",null,null,null],"sourceRoot":"../src"}